<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto+Slab:300,300italic,400,400italic,700,700italic|PT+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","version":"8.1.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}};
  </script>
<meta name="description" content="不积跬步，无以至千里；不积小流，无以成江海。">
<meta property="og:type" content="website">
<meta property="og:title" content="AndyJMR&#39;s Blog">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="AndyJMR&#39;s Blog">
<meta property="og:description" content="不积跬步，无以至千里；不积小流，无以成江海。">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="AndyJMR">
<meta property="article:tag" content="C&#x2F;C++ OpenGL VTK ITK">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/2/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>
<title>AndyJMR's Blog</title>
  

  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?a735f8df830ee11dac6bfeec912328eb";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">AndyJMR's Blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <section class="post-toc-wrap sidebar-panel">
        </section>
        <!--/noindex-->

        <section class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">AndyJMR</p>
  <div class="site-description" itemprop="description">不积跬步，无以至千里；不积小流，无以成江海。</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">16</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">39</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/AndyJMR" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;AndyJMR" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/minmindianzi" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;minmindianzi" rel="noopener" target="_blank"><i class="fab fa-internet-explorer fa-fw"></i>CSDN</a>
      </span>
  </div>



        </section>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/12/14/VTK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%89%AA%E5%88%87(vtkSelectPolyData)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="AndyJMR">
      <meta itemprop="description" content="不积跬步，无以至千里；不积小流，无以成江海。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AndyJMR's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/12/14/VTK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%89%AA%E5%88%87(vtkSelectPolyData)/" class="post-title-link" itemprop="url">VTK笔记——多边形剪切(vtkSelectPolyData)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2020-12-14 13:28:25 / Modified: 14:47:09" itemprop="dateCreated datePublished" datetime="2020-12-14T13:28:25+08:00">2020-12-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VTK%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">VTK笔记</span></a>
        </span>
    </span>

  
    <span id="/2020/12/14/VTK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%89%AA%E5%88%87(vtkSelectPolyData)/" class="post-meta-item leancloud_visitors" data-flag-title="VTK笔记——多边形剪切(vtkSelectPolyData)" title="Views">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/12/14/VTK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%89%AA%E5%88%87(vtkSelectPolyData)/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/12/14/VTK笔记——多边形剪切(vtkSelectPolyData)/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>这篇笔记和之前的一篇笔记，<a target="_blank" rel="noopener" href="https://blog.csdn.net/minmindianzi/article/details/88848216">VTK笔记——多边形剪切(vtkClipPolyData)</a>，都是关于多边形处理的，但不同的是后者是用封闭的点线来剪切。点线剪切可以在多边形上任意剪切掉一部分，显得比较灵活，就像下面示意这样。A)可以在多边形的中间剪出一个洞，B)也可在多边形边缘剪掉一块。<br><img src="https://img-blog.csdnimg.cn/20190328154020420.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21pbm1pbmRpYW56aQ==,size_16,color_FFFFFF,t_70" alt="示意图"></p>
<p>我们知道，多边形是由点(points)和面片(cells)组成的。剪切的本身就是对多边形的这些数据进行处理。而在实际应用中，还有更多问题需要考虑。比如，切线是是否是任意的，需不需要过顶点，如果没在顶点上，那是否又需要拆分三角形等等。</p>
<h3 id="vtkSelectPolyData"><a href="#vtkSelectPolyData" class="headerlink" title="vtkSelectPolyData"></a>vtkSelectPolyData</h3><p>vtk中，<strong>vtkSelectPolyData</strong>，有一个用于多边形剪切的类<br>关于它的描述：</p>
<blockquote>
<p>select portion of polygonal mesh; generate selection scalars</p>
<p>vtkSelectPolyData is a filter that selects polygonal data based on defining a “loop” and indicating the region inside of the loop. The mesh within the loop consists of complete cells (the cells are not cut). Alternatively, this filter can be used to generate scalars. These scalar values, which are a distance measure to the loop, can be used to clip, contour. or extract data (i.e., anything that an implicit function can do).</p>
<p>The loop is defined by an array of x-y-z point coordinates. (Coordinates should be in the same coordinate space as the input polygonal data.) The loop can be concave and non-planar, but not self-intersecting. The input to the filter is a polygonal mesh (only surface primitives such as triangle strips and polygons); the output is either a) a portion of the original mesh laying within the selection loop (GenerateSelectionScalarsOff); or b) the same polygonal mesh with the addition of scalar values (GenerateSelectionScalarsOn).</p>
<p>The algorithm works as follows. For each point coordinate in the loop, the closest point in the mesh is found. The result is a loop of closest point ids from the mesh. Then, the edges in the mesh connecting the closest points (and laying along the lines forming the loop) are found. A greedy edge tracking procedure is used as follows. At the current point, the mesh edge oriented in the direction of and whose end point is closest to the line is chosen. The edge is followed to the new end point, and the procedure is repeated. This process continues until the entire loop has been created.</p>
<p>To determine what portion of the mesh is inside and outside of the loop, three options are possible. 1) the smallest connected region, 2) the largest connected region, and 3) the connected region closest to a user specified point. (Set the ivar SelectionMode.)</p>
<p>Once the loop is computed as above, the GenerateSelectionScalars controls the output of the filter. If on, then scalar values are generated based on distance to the loop lines. Otherwise, the cells laying inside the selection loop are output. By default, the mesh laying within the loop is output; however, if InsideOut is on, then the portion of the mesh laying outside of the loop is output.</p>
<p>The filter can be configured to generate the unselected portions of the mesh as output by setting GenerateUnselectedOutput. Use the method GetUnselectedOutput to access this output. (Note: this flag is pertinent only when GenerateSelectionScalars is off.)</p>
</blockquote>
<p>简单总结一下:</p>
<ol>
<li>选择多边形网格的一部分，输出部分多边形网格或标量，由GenerateSelectionScalarsOn/Off决定</li>
<li>网格的选取是通过一个环(loop)来指定的，可以是凹的和非平面的，但不能自相交</li>
<li>要确定选择网格的那个部分，有三种方式：1)最小连通区域，2)最大连通区域，3)最接近用户选取的连通区域。通过SelectionMode设置</li>
<li>默认是输出环内的网格，不过，可以通过InsideOut设置输出环外的网格</li>
<li>也可以输出未选取的部分，由GenerateUnselectedOutput决定</li>
<li>确保选取的点在一个连通的表面上，否则结果将为空。另外，自相交的结果不可预料</li>
</ol>
<h3 id="主要代码"><a href="#主要代码" class="headerlink" title="主要代码"></a>主要代码</h3><p><strong>构造点</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vtkSmartPointer&lt;vtkPoints&gt; loopPoints =</span><br><span class="line">  vtkSmartPointer&lt;vtkPoints&gt;::New();</span><br><span class="line">  </span><br><span class="line">loopPoints-&gt;InsertNextPoint(<span class="number">-0.16553</span>, <span class="number">0.135971</span>, <span class="number">0.451972</span>);</span><br><span class="line">loopPoints-&gt;InsertNextPoint(<span class="number">-0.0880123</span>, <span class="number">-0.134952</span>, <span class="number">0.4747</span>);</span><br></pre></td></tr></table></figure>
<p><strong>设置剪切</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vtkSmartPointer&lt;vtkSelectPolyData&gt; selectPolyData =</span><br><span class="line">  vtkSmartPointer&lt;vtkSelectPolyData&gt;::New();</span><br><span class="line">selectPolyData-&gt;SetInputConnection(sphereSource-&gt;GetOutputPort());</span><br><span class="line">selectPolyData-&gt;SetLoop(loopPoints);</span><br><span class="line">selectPolyData-&gt;GenerateUnselectedOutputOn();</span><br><span class="line">selectPolyData-&gt;SetSelectionModeToSmallestRegion(); <span class="comment">//negative scalars inside</span></span><br><span class="line">selectPolyData-&gt;Update();</span><br></pre></td></tr></table></figure>
<p><strong>获取剪切数据</strong><br><code>selectPolyData-&gt;GetOutputPort();</code><br><code>selectPolyData-&gt;GetUnselectedOutput()</code></p>
<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="https://img-blog.csdnimg.cn/20190328163430505.gif" alt="在这里插入图片描述"></p>
<p>实际使用过程中，loop的点可能是通过交互进行拾取的。</p>
<h3 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkSmartPointer.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkProperty.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkSelectPolyData.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkSphereSource.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkClipPolyData.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkProperty.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkPolyDataMapper.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkLODActor.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkRenderWindowInteractor.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkRenderWindow.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkRenderer.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkNamedColors.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">char</span> *[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  vtkSmartPointer&lt;vtkNamedColors&gt; colors =</span><br><span class="line">    vtkSmartPointer&lt;vtkNamedColors&gt;::New();</span><br><span class="line"></span><br><span class="line">  vtkSmartPointer&lt;vtkSphereSource&gt; sphereSource = </span><br><span class="line">    vtkSmartPointer&lt;vtkSphereSource&gt;::New();</span><br><span class="line">  sphereSource-&gt;SetPhiResolution(<span class="number">50</span>);</span><br><span class="line">  sphereSource-&gt;SetThetaResolution(<span class="number">100</span>);</span><br><span class="line">  sphereSource-&gt;Update();</span><br><span class="line">      </span><br><span class="line">  vtkSmartPointer&lt;vtkPoints&gt; loopPoints =</span><br><span class="line">    vtkSmartPointer&lt;vtkPoints&gt;::New();</span><br><span class="line">    </span><br><span class="line">  loopPoints-&gt;InsertNextPoint(<span class="number">-0.16553</span>, <span class="number">0.135971</span>, <span class="number">0.451972</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint(<span class="number">-0.0880123</span>, <span class="number">-0.134952</span>, <span class="number">0.4747</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint(<span class="number">0.00292618</span>, <span class="number">-0.134604</span>, <span class="number">0.482459</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint(<span class="number">0.0641941</span>, <span class="number">0.067112</span>, <span class="number">0.490947</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint(<span class="number">0.15577</span>, <span class="number">0.0734765</span>, <span class="number">0.469245</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint(<span class="number">0.166667</span>, <span class="number">-0.129217</span>, <span class="number">0.454622</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint(<span class="number">0.241259</span>, <span class="number">-0.123363</span>, <span class="number">0.420581</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint(<span class="number">0.240334</span>, <span class="number">0.0727106</span>, <span class="number">0.432555</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint(<span class="number">0.308529</span>, <span class="number">0.0844311</span>, <span class="number">0.384357</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint(<span class="number">0.32672</span>, <span class="number">-0.121674</span>, <span class="number">0.359187</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint( <span class="number">0.380721</span>, <span class="number">-0.117342</span>, <span class="number">0.302527</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint( <span class="number">0.387804</span>, <span class="number">0.0455074</span>, <span class="number">0.312375</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint( <span class="number">0.43943</span>, <span class="number">-0.111673</span>, <span class="number">0.211707</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint( <span class="number">0.470984</span>, <span class="number">-0.0801913</span>, <span class="number">0.147919</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint( <span class="number">0.436777</span>, <span class="number">0.0688872</span>, <span class="number">0.233021</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint( <span class="number">0.44874</span>, <span class="number">0.188852</span>, <span class="number">0.109882</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint( <span class="number">0.391352</span>, <span class="number">0.254285</span>, <span class="number">0.176943</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint( <span class="number">0.373274</span>, <span class="number">0.154162</span>, <span class="number">0.294296</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint( <span class="number">0.274659</span>, <span class="number">0.311654</span>, <span class="number">0.276609</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint( <span class="number">0.206068</span>, <span class="number">0.31396</span>, <span class="number">0.329702</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint( <span class="number">0.263789</span>, <span class="number">0.174982</span>, <span class="number">0.387308</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint( <span class="number">0.213034</span>, <span class="number">0.175485</span>, <span class="number">0.417142</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint( <span class="number">0.169113</span>, <span class="number">0.261974</span>, <span class="number">0.390286</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint( <span class="number">0.102552</span>, <span class="number">0.25997</span>, <span class="number">0.414814</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint( <span class="number">0.131512</span>, <span class="number">0.161254</span>, <span class="number">0.454705</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint( <span class="number">0.000192443</span>, <span class="number">0.156264</span>, <span class="number">0.475307</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint( <span class="number">-0.0392091</span>, <span class="number">0.000251724</span>, <span class="number">0.499943</span>);</span><br><span class="line">  loopPoints-&gt;InsertNextPoint( <span class="number">-0.096161</span>, <span class="number">0.159646</span>, <span class="number">0.46438</span>);</span><br><span class="line">  </span><br><span class="line">  vtkSmartPointer&lt;vtkSelectPolyData&gt; selectPolyData =</span><br><span class="line">    vtkSmartPointer&lt;vtkSelectPolyData&gt;::New();</span><br><span class="line">  selectPolyData-&gt;SetInputConnection(sphereSource-&gt;GetOutputPort());</span><br><span class="line">  selectPolyData-&gt;SetLoop(loopPoints);</span><br><span class="line">  selectPolyData-&gt;GenerateUnselectedOutputOn();</span><br><span class="line">  selectPolyData-&gt;SetSelectionModeToSmallestRegion(); <span class="comment">//negative scalars inside</span></span><br><span class="line">  selectPolyData-&gt;Update();</span><br><span class="line"></span><br><span class="line">  vtkSmartPointer&lt;vtkProperty&gt; backProp =</span><br><span class="line">	  vtkSmartPointer&lt;vtkProperty&gt;::New();</span><br><span class="line">  backProp-&gt;SetColor(colors-&gt;GetColor3d(<span class="string">&quot;tomato&quot;</span>).GetData());</span><br><span class="line"></span><br><span class="line">  vtkSmartPointer&lt;vtkPolyDataMapper&gt; selectMapper = </span><br><span class="line">    vtkSmartPointer&lt;vtkPolyDataMapper&gt;::New();</span><br><span class="line">  selectMapper-&gt;SetInputData(selectPolyData-&gt;GetUnselectedOutput());</span><br><span class="line">  <span class="comment">//selectMapper-&gt;ScalarVisibilityOff();</span></span><br><span class="line"></span><br><span class="line">  vtkSmartPointer&lt;vtkLODActor&gt; selectActor = </span><br><span class="line">    vtkSmartPointer&lt;vtkLODActor&gt;::New();</span><br><span class="line">  selectActor-&gt;SetMapper(selectMapper);</span><br><span class="line">  selectActor-&gt;SetBackfaceProperty(backProp);</span><br><span class="line">  selectActor-&gt;GetProperty()-&gt;SetColor(colors-&gt;GetColor3d(<span class="string">&quot;banana&quot;</span>).GetData());</span><br><span class="line"></span><br><span class="line">  vtkSmartPointer&lt;vtkPolyDataMapper&gt; unselectMapper =</span><br><span class="line">	  vtkSmartPointer&lt;vtkPolyDataMapper&gt;::New();</span><br><span class="line">  unselectMapper-&gt;SetInputConnection(selectPolyData-&gt;GetOutputPort());</span><br><span class="line">  <span class="comment">//unselectMapper-&gt;ScalarVisibilityOff();</span></span><br><span class="line"></span><br><span class="line">  vtkSmartPointer&lt;vtkLODActor&gt; unselectActor =</span><br><span class="line">	  vtkSmartPointer&lt;vtkLODActor&gt;::New();</span><br><span class="line">  unselectActor-&gt;SetMapper(unselectMapper);</span><br><span class="line">  unselectActor-&gt;SetBackfaceProperty(backProp);</span><br><span class="line">  unselectActor-&gt;GetProperty()-&gt;SetColor(colors-&gt;GetColor3d(<span class="string">&quot;banana&quot;</span>).GetData());</span><br><span class="line">    </span><br><span class="line">  vtkSmartPointer&lt;vtkRenderer&gt; renderer1 =</span><br><span class="line">	  vtkSmartPointer&lt;vtkRenderer&gt;::New();</span><br><span class="line"></span><br><span class="line">  vtkSmartPointer&lt;vtkRenderer&gt; renderer2 =</span><br><span class="line">	  vtkSmartPointer&lt;vtkRenderer&gt;::New();</span><br><span class="line"></span><br><span class="line">  vtkSmartPointer&lt;vtkRenderWindow&gt; renderWindow =</span><br><span class="line">    vtkSmartPointer&lt;vtkRenderWindow&gt;::New();</span><br><span class="line">  renderWindow-&gt;AddRenderer(renderer1);</span><br><span class="line">  renderWindow-&gt;AddRenderer(renderer2);</span><br><span class="line">  </span><br><span class="line">  vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; interactor =</span><br><span class="line">    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::New();</span><br><span class="line">  interactor-&gt;SetRenderWindow(renderWindow);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Add the actors to the renderer, set the background and size</span></span><br><span class="line">  renderer1-&gt;AddActor (selectActor);</span><br><span class="line">  renderer1-&gt;SetBackground (colors-&gt;GetColor3d(<span class="string">&quot;slate_grey&quot;</span>).GetData());</span><br><span class="line">  renderer1-&gt;SetViewport(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  renderer2-&gt;AddActor(unselectActor);</span><br><span class="line">  renderer2-&gt;SetBackground(colors-&gt;GetColor3d(<span class="string">&quot;slate_blue&quot;</span>).GetData());</span><br><span class="line">  renderer2-&gt;SetViewport(<span class="number">0.5</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  renderWindow-&gt;SetSize (<span class="number">800</span>, <span class="number">400</span>);</span><br><span class="line"></span><br><span class="line">  renderWindow-&gt;Render();</span><br><span class="line">  interactor-&gt;Start();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h3><p><a target="_blank" rel="noopener" href="https://vtk.org/doc/nightly/html/classvtkSelectPolyData.html">vtkSelectPolyData Class Reference</a><br><a target="_blank" rel="noopener" href="https://www.paraview.org/Wiki/VTK/Examples/Cxx/PolyData/SelectPolyData">SelectPolyData Examples</a><br><img src="https://img-blog.csdnimg.cn/20190328163005611.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21pbm1pbmRpYW56aQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/12/14/VTK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%89%AA%E5%88%87(vtkClipPolyData)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="AndyJMR">
      <meta itemprop="description" content="不积跬步，无以至千里；不积小流，无以成江海。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AndyJMR's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/12/14/VTK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%89%AA%E5%88%87(vtkClipPolyData)/" class="post-title-link" itemprop="url">VTK笔记——多边形剪切(vtkClipPolyData)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2020-12-14 13:28:25 / Modified: 14:46:59" itemprop="dateCreated datePublished" datetime="2020-12-14T13:28:25+08:00">2020-12-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VTK%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">VTK笔记</span></a>
        </span>
    </span>

  
    <span id="/2020/12/14/VTK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%89%AA%E5%88%87(vtkClipPolyData)/" class="post-meta-item leancloud_visitors" data-flag-title="VTK笔记——多边形剪切(vtkClipPolyData)" title="Views">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/12/14/VTK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%89%AA%E5%88%87(vtkClipPolyData)/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/12/14/VTK笔记——多边形剪切(vtkClipPolyData)/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在三维图形中，往往会涉及到对多边形的处理，多边形剪切就是其中之一。什么是多边形剪切？打个比方，如果把多边形比作西瓜的话，那剪切就相当于用水果刀切西瓜，一刀下去，西瓜就被切成两块。当然，也可以切两下，三下，甚至更多。</p>
<h3 id="vtkClipPolyData"><a href="#vtkClipPolyData" class="headerlink" title="vtkClipPolyData"></a>vtkClipPolyData</h3><p>vtkClipPolyData，一个用于多边形剪切模型的方法类。<br>关于它的用法，引用一段描述：</p>
<blockquote>
<p>clip polygonal data with user-specified implicit function or input scalar data<br>vtkClipPolyData is a filter that clips polygonal data using either any subclass of vtkImplicitFunction, or the input scalar data. Clipping means that it actually “cuts” through the cells of the dataset, returning everything inside of the specified implicit function (or greater than the scalar value) including “pieces” of a cell. (Compare this with vtkExtractGeometry, which pulls out entire, uncut cells.) The output of this filter is polygonal data.<br>To use this filter, you must decide if you will be clipping with an implicit function, or whether you will be using the input scalar data. If you want to clip with an implicit function, you must: 1) define an implicit function 2) set it with the SetClipFunction method 3) apply the GenerateClipScalarsOn method If a ClipFunction is not specified, or GenerateClipScalars is off (the default), then the input’s scalar data will be used to clip the polydata.<br>You can also specify a scalar value, which is used to decide what is inside and outside of the implicit function. You can also reverse the sense of what inside/outside is by setting the InsideOut instance variable. (The cutting algorithm proceeds by computing an implicit function value or using the input scalar data for each point in the dataset. This is compared to the scalar value to determine inside/outside.)<br>This filter can be configured to compute a second output. The second output is the polygonal data that is clipped away. Set the GenerateClippedData boolean on if you wish to access this output data.</p>
</blockquote>
<p>描述清楚的表明，多边形剪切，有两种基本方式，指定隐函数和输入标量数据。</p>
<h4 id="隐函数"><a href="#隐函数" class="headerlink" title="隐函数"></a>隐函数</h4><p>数学中的定义是这样，</p>
<blockquote>
<p>隐函数是由隐式方程所隐含定义的函数。设F（x,y）是某个定义域上的函数。如果存在定义域上的子集D，使得对每个x属于D，存在相应的y满足F(x,y)=0，则称方程确定了一个隐函数。</p>
</blockquote>
<p>VTK中，继承vtkImplicitFunction类的子类都可以用作隐函数，如稍后示例用到的vtkPlane。<br>不一一列举了，用一幅图来表示：<br><img src="https://img-blog.csdnimg.cn/20190328105014672.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21pbm1pbmRpYW56aQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h4 id="标量数据"><a href="#标量数据" class="headerlink" title="标量数据"></a>标量数据</h4><p>在物理学中，标量定义，</p>
<blockquote>
<p>标量（scalar），亦称“无向量”。有些物理量，只具有数值大小，而没有方向，部分有正负之分。物理学中，标量（或作纯量）指在坐标变换下保持不变的物理量。用通俗的说法，标量是只有大小，没有方向的量。</p>
</blockquote>
<p>vtk中，标量数据是数据集里的每个位置具有单值的数据，它只表示数据的大小，如温度、压力、密度、高度。是属性数据的一种。</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>下面简单的用隐函数vtkPlane将圆球vtkSphereSource剪切成两部分。</p>
<h3 id="主要代码"><a href="#主要代码" class="headerlink" title="主要代码"></a>主要代码</h3><p><strong>构造切割平面</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vtkPlane *plane = vtkPlane::New();</span><br><span class="line">vtkSmartPointer&lt;vtkPlane&gt; plane =</span><br><span class="line">	vtkSmartPointer&lt;vtkPlane&gt;::New();</span><br><span class="line">plane-&gt;SetOrigin(<span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>);</span><br><span class="line">plane-&gt;SetNormal(<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p><strong>设置隐函数</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vtkSmartPointer&lt;vtkClipPolyData&gt; clipPolyData =</span><br><span class="line">	vtkSmartPointer&lt;vtkClipPolyData&gt;::New();</span><br><span class="line">clipPolyData-&gt;SetInputConnection(sphereSource-&gt;GetOutputPort());</span><br><span class="line">clipPolyData-&gt;SetClipFunction(plane);</span><br><span class="line">clipPolyData-&gt;GenerateClippedOutputOn();</span><br><span class="line">clipPolyData-&gt;Update();</span><br></pre></td></tr></table></figure>
<p><strong>SetGenerateClippedOutput</strong>用于设置是否生成被剪切掉的部分，默认是不生成的。<br><strong>获取剪切数据</strong><br>剪切留下的部分：<br><code>clipPolyData-&gt;GetClippedOutputPort();</code><br>被剪切掉的部分（如果GenerateClippedOutput是off，将无法获取）：<br><code>clipPolyData-&gt;GetOutputPort();</code></p>
<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="https://img-blog.csdnimg.cn/20191213113001241.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21pbm1pbmRpYW56aQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="ClipPolydata-cxx"><a href="#ClipPolydata-cxx" class="headerlink" title="ClipPolydata.cxx"></a>ClipPolydata.cxx</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkRenderWindow.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkRenderWindowInteractor.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkRenderer.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkSphereSource.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkPolyDataMapper.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkActor.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkSmartPointer.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkCamera.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkInteractorStyleTrackballCamera.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkNamedColors.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkClipPolyData.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkProperty.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkPlane.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">char</span> *[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vtkSmartPointer&lt;vtkSphereSource&gt; sphereSource =</span><br><span class="line">		vtkSmartPointer&lt;vtkSphereSource&gt;::New();</span><br><span class="line">	sphereSource-&gt;SetCenter(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>);</span><br><span class="line">	sphereSource-&gt;SetRadius(<span class="number">5.0</span>);</span><br><span class="line">	sphereSource-&gt;Update();</span><br><span class="line"></span><br><span class="line">	vtkPlane *vPlane = vtkPlane::New();</span><br><span class="line">	vtkSmartPointer&lt;vtkPlane&gt; plane =</span><br><span class="line">		vtkSmartPointer&lt;vtkPlane&gt;::New();</span><br><span class="line">	plane-&gt;SetOrigin(<span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>);</span><br><span class="line">	plane-&gt;SetNormal(<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	vtkSmartPointer&lt;vtkClipPolyData&gt; clipPolyData =</span><br><span class="line">		vtkSmartPointer&lt;vtkClipPolyData&gt;::New();</span><br><span class="line">	clipPolyData-&gt;SetInputConnection(sphereSource-&gt;GetOutputPort());</span><br><span class="line">	clipPolyData-&gt;SetClipFunction(plane);</span><br><span class="line">	clipPolyData-&gt;GenerateClippedOutputOn();</span><br><span class="line">	clipPolyData-&gt;Update();</span><br><span class="line"></span><br><span class="line">	vtkSmartPointer&lt;vtkPolyDataMapper&gt; mapper1 =</span><br><span class="line">		vtkSmartPointer&lt;vtkPolyDataMapper&gt;::New();</span><br><span class="line">	mapper1-&gt;SetInputConnection(clipPolyData-&gt;GetOutputPort());</span><br><span class="line"></span><br><span class="line">	vtkSmartPointer&lt;vtkActor&gt; actor1 =</span><br><span class="line">		vtkSmartPointer&lt;vtkActor&gt;::New();</span><br><span class="line">	actor1-&gt;SetMapper(mapper1);</span><br><span class="line"></span><br><span class="line">	vtkSmartPointer&lt;vtkPolyDataMapper&gt; mapper2 =</span><br><span class="line">		vtkSmartPointer&lt;vtkPolyDataMapper&gt;::New();</span><br><span class="line">	mapper2-&gt;SetInputConnection(clipPolyData-&gt;GetClippedOutputPort());</span><br><span class="line"></span><br><span class="line">	vtkSmartPointer&lt;vtkActor&gt; actor2 =</span><br><span class="line">		vtkSmartPointer&lt;vtkActor&gt;::New();</span><br><span class="line">	actor2-&gt;SetMapper(mapper2);</span><br><span class="line"></span><br><span class="line">	vtkSmartPointer&lt;vtkNamedColors&gt; colors =</span><br><span class="line">		vtkSmartPointer&lt;vtkNamedColors&gt;::New();</span><br><span class="line"></span><br><span class="line">	vtkSmartPointer&lt;vtkRenderer&gt; renderer1 =</span><br><span class="line">		vtkSmartPointer&lt;vtkRenderer&gt;::New();</span><br><span class="line">	renderer1-&gt;SetBackground(colors-&gt;GetColor3d(<span class="string">&quot;Slate_grey&quot;</span>).GetData());</span><br><span class="line">	renderer1-&gt;AddActor(actor1);</span><br><span class="line">	renderer1-&gt;SetViewport(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	vtkSmartPointer&lt;vtkRenderer&gt; renderer2 =</span><br><span class="line">		vtkSmartPointer&lt;vtkRenderer&gt;::New();</span><br><span class="line">	renderer2-&gt;SetBackground(colors-&gt;GetColor3d(<span class="string">&quot;Slate_blue&quot;</span>).GetData());</span><br><span class="line">	renderer2-&gt;AddActor(actor2);</span><br><span class="line">	renderer2-&gt;SetViewport(<span class="number">0.5</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	vtkSmartPointer&lt;vtkRenderWindow&gt; renderWindow =</span><br><span class="line">		vtkSmartPointer&lt;vtkRenderWindow&gt;::New();</span><br><span class="line">	renderWindow-&gt;SetSize(<span class="number">600</span>, <span class="number">300</span>);</span><br><span class="line">	renderWindow-&gt;AddRenderer(renderer1);</span><br><span class="line">	renderWindow-&gt;AddRenderer(renderer2);</span><br><span class="line"></span><br><span class="line">	vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; renderWindowInteractor =</span><br><span class="line">		vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::New();</span><br><span class="line">	renderWindowInteractor-&gt;SetRenderWindow(renderWindow);</span><br><span class="line"></span><br><span class="line">	vtkSmartPointer&lt;vtkInteractorStyleTrackballCamera&gt; style =</span><br><span class="line">		vtkSmartPointer&lt;vtkInteractorStyleTrackballCamera&gt;::New();</span><br><span class="line">	renderWindowInteractor-&gt;SetInteractorStyle(style);</span><br><span class="line"></span><br><span class="line">	renderWindow-&gt;Render();</span><br><span class="line">	renderWindowInteractor-&gt;Initialize();</span><br><span class="line">	renderWindowInteractor-&gt;Start();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h3><p><a target="_blank" rel="noopener" href="https://vtk.org/doc/nightly/html/classvtkClipPolyData.html">vtkClipPolyData Class Reference</a><br><img src="https://img-blog.csdnimg.cn/20190328100418987.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21pbm1pbmRpYW56aQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/12/14/VTK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Widget%E7%AE%80%E4%BB%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="AndyJMR">
      <meta itemprop="description" content="不积跬步，无以至千里；不积小流，无以成江海。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AndyJMR's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/12/14/VTK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Widget%E7%AE%80%E4%BB%8B/" class="post-title-link" itemprop="url">VTK笔记——Widget简介</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2020-12-14 13:28:25 / Modified: 14:48:38" itemprop="dateCreated datePublished" datetime="2020-12-14T13:28:25+08:00">2020-12-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VTK%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">VTK笔记</span></a>
        </span>
    </span>

  
    <span id="/2020/12/14/VTK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Widget%E7%AE%80%E4%BB%8B/" class="post-meta-item leancloud_visitors" data-flag-title="VTK笔记——Widget简介" title="Views">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/12/14/VTK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Widget%E7%AE%80%E4%BB%8B/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/12/14/VTK笔记——Widget简介/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>很多时候，3D模型软件需要和用户进行交互，比如按钮单击，鼠标移动，滚轮缩放，快捷键控制等等。在VTK中，widget可以为这些复杂的交互提供便利。比如，vtkBoxWidget2 允许你在屏幕上移动box，它提供了平移box，旋转和缩放这个box的操作。当然，你会说，这些可以用vtkCubeSource 和指定的vtkInteractorStyle来实现，没错，但相比而言，widget以一种更一般，更便利和更独立的方式提供了所有的这些操作。</p>
<p>widget包含两个重要的组成部分：<strong>Interaction</strong>和<strong>Representation</strong>.</p>
<h2 id="Interaction"><a href="#Interaction" class="headerlink" title="Interaction"></a>Interaction</h2><p><strong>Interaction</strong>是一些名叫vtk*Widget的类（比如vtkBoxWidget2）。它包含了交互的所有选项和事件处理。</p>
<h2 id="Representation"><a href="#Representation" class="headerlink" title="Representation"></a>Representation</h2><p><strong>Representation</strong>是显示并与之交互的一类对象，以名叫vtk*Representation.</p>
<h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><p>创建一个widget:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vtkSmartPointer&lt;vtkBoxWidget2&gt; boxWidget =</span><br><span class="line">  vtkSmartPointer&lt;vtkBoxWidget2&gt;::New();</span><br><span class="line">boxWidget-&gt;SetInteractor( renderWindowInteractor );</span><br></pre></td></tr></table></figure>

<p>大多数widget都有默认的representation。如果你想改变它，可以手动创建一个representation并设置到widget.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> vtkSmartPointer&lt;vtkBoxRepresentation&gt; boxRep =</span><br><span class="line">vtkSmartPointer&lt;vtkBoxRepresentation&gt;::New();</span><br><span class="line"> boxRep-&gt;SetPlaceFactor(<span class="number">1</span>);</span><br><span class="line"> boxRep-&gt;PlaceWidget(actor-&gt;GetBounds());</span><br><span class="line"> boxWidget-&gt;SetRepresentation(boxRep);</span><br></pre></td></tr></table></figure>

<h2 id="事件处理"><a href="#事件处理" class="headerlink" title="事件处理"></a>事件处理</h2><p>往往你希望响应用户在widget上所作的操作，那这时候就需要定义一个vtkCommand的子类，并在一个类似于vtkCallbackFunction回调函数的方法Execute中来处理这些操作。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">vtkBoxCallback</span> :</span> <span class="keyword">public</span> vtkCommand</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">static</span> vtkBoxCallback *<span class="title">New</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> vtkBoxCallback;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  vtkSmartPointer&lt;vtkActor&gt; m_actor;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">SetActor</span><span class="params">(vtkSmartPointer&lt;vtkActor&gt; actor)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    m_actor = actor;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Execute</span><span class="params">(vtkObject *caller, <span class="keyword">unsigned</span> <span class="keyword">long</span>, <span class="keyword">void</span>*)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    vtkSmartPointer&lt;vtkBoxWidget2&gt; boxWidget =</span><br><span class="line">      <span class="keyword">dynamic_cast</span>&lt;vtkBoxWidget2*&gt;(caller);</span><br><span class="line"></span><br><span class="line">    vtkSmartPointer&lt;vtkTransform&gt; t =</span><br><span class="line">      vtkSmartPointer&lt;vtkTransform&gt;::New();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">dynamic_cast</span>&lt;vtkBoxRepresentation*&gt;(boxWidget-&gt;GetRepresentation())-&gt;GetTransform(t);</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_actor-&gt;SetUserTransform(t);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  vtkBoxCallback()&#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="绑定事件"><a href="#绑定事件" class="headerlink" title="绑定事件"></a>绑定事件</h2><p>将自定义的事件添加到widget上，需要创建vtkCommand对象并调用widget的AddObserver方法。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vtkSmartPointer&lt;vtkBoxCallback&gt; boxCallback =</span><br><span class="line">  vtkSmartPointer&lt;vtkBoxCallback&gt;::New();</span><br><span class="line">boxCallback-&gt;SetActor(actor);</span><br><span class="line">boxWidget-&gt;AddObserver(vtkCommand::InteractionEvent, boxCallback);</span><br></pre></td></tr></table></figure>

<h2 id="启用Widget"><a href="#启用Widget" class="headerlink" title="启用Widget"></a>启用Widget</h2><p>使用Widget时，一定要注意顺序：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">boxWidget-&gt;On();</span><br><span class="line"></span><br><span class="line">renderWindowInteractor-&gt;Start();</span><br></pre></td></tr></table></figure>
<h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><p><img src="https://img-blog.csdnimg.cn/2019042215025336.gif" alt="在这里插入图片描述"></p>
<h2 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkSmartPointer.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkConeSource.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkPolyDataMapper.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkActor.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkRenderer.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkRenderWindow.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkRenderWindowInteractor.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkInteractorStyleTrackballCamera.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkBoxWidget2.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkBoxRepresentation.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkCommand.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vtkTransform.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">vtkBoxCallback</span> :</span> <span class="keyword">public</span> vtkCommand</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">static</span> vtkBoxCallback *<span class="title">New</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> vtkBoxCallback;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  vtkSmartPointer&lt;vtkActor&gt; m_actor;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">SetActor</span><span class="params">(vtkSmartPointer&lt;vtkActor&gt; actor)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    m_actor = actor;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Execute</span><span class="params">(vtkObject *caller, <span class="keyword">unsigned</span> <span class="keyword">long</span>, <span class="keyword">void</span>*)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    vtkSmartPointer&lt;vtkBoxWidget2&gt; boxWidget =</span><br><span class="line">      <span class="keyword">dynamic_cast</span>&lt;vtkBoxWidget2*&gt;(caller);</span><br><span class="line"></span><br><span class="line">    vtkSmartPointer&lt;vtkTransform&gt; t =</span><br><span class="line">      vtkSmartPointer&lt;vtkTransform&gt;::New();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">dynamic_cast</span>&lt;vtkBoxRepresentation*&gt;(boxWidget-&gt;GetRepresentation())-&gt;GetTransform(t);</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_actor-&gt;SetUserTransform(t);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  vtkBoxCallback()&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  vtkSmartPointer&lt;vtkConeSource&gt; coneSource =</span><br><span class="line">    vtkSmartPointer&lt;vtkConeSource&gt;::New();</span><br><span class="line">  coneSource-&gt;SetHeight(<span class="number">1.5</span>);</span><br><span class="line"></span><br><span class="line">  vtkSmartPointer&lt;vtkPolyDataMapper&gt; mapper =</span><br><span class="line">    vtkSmartPointer&lt;vtkPolyDataMapper&gt;::New();</span><br><span class="line">  mapper-&gt;SetInputConnection(coneSource-&gt;GetOutputPort());</span><br><span class="line"></span><br><span class="line">  vtkSmartPointer&lt;vtkActor&gt; actor = vtkSmartPointer&lt;vtkActor&gt;::New();</span><br><span class="line">  actor-&gt;SetMapper(mapper);</span><br><span class="line"></span><br><span class="line">  vtkSmartPointer&lt;vtkRenderer&gt; renderer =</span><br><span class="line">    vtkSmartPointer&lt;vtkRenderer&gt;::New();</span><br><span class="line">  renderer-&gt;AddActor(actor);</span><br><span class="line">  renderer-&gt;ResetCamera(); </span><br><span class="line"></span><br><span class="line">  vtkSmartPointer&lt;vtkRenderWindow&gt; renderWindow =</span><br><span class="line">    vtkSmartPointer&lt;vtkRenderWindow&gt;::New();</span><br><span class="line">  renderWindow-&gt;AddRenderer(renderer);</span><br><span class="line"></span><br><span class="line">  vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; renderWindowInteractor =</span><br><span class="line">    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::New();</span><br><span class="line">  renderWindowInteractor-&gt;SetRenderWindow(renderWindow);</span><br><span class="line"></span><br><span class="line">  vtkSmartPointer&lt;vtkInteractorStyleTrackballCamera&gt; style =</span><br><span class="line">    vtkSmartPointer&lt;vtkInteractorStyleTrackballCamera&gt;::New();</span><br><span class="line">  renderWindowInteractor-&gt;SetInteractorStyle(style);</span><br><span class="line"></span><br><span class="line">  vtkSmartPointer&lt;vtkBoxWidget2&gt; boxWidget =</span><br><span class="line">    vtkSmartPointer&lt;vtkBoxWidget2&gt;::New();</span><br><span class="line">  boxWidget-&gt;SetInteractor(renderWindowInteractor);</span><br><span class="line"></span><br><span class="line">  vtkSmartPointer&lt;vtkBoxRepresentation&gt; boxRep =</span><br><span class="line">	vtkSmartPointer&lt;vtkBoxRepresentation&gt;::New();</span><br><span class="line">  boxRep-&gt;SetPlaceFactor(<span class="number">1</span>);</span><br><span class="line">  boxRep-&gt;PlaceWidget(actor-&gt;GetBounds());</span><br><span class="line">  boxWidget-&gt;SetRepresentation(boxRep);</span><br><span class="line">  </span><br><span class="line">  vtkSmartPointer&lt;vtkBoxCallback&gt; boxCallback =</span><br><span class="line">    vtkSmartPointer&lt;vtkBoxCallback&gt;::New();</span><br><span class="line">  boxCallback-&gt;SetActor(actor);</span><br><span class="line">  boxWidget-&gt;AddObserver(vtkCommand::InteractionEvent, boxCallback);</span><br><span class="line"></span><br><span class="line">  boxWidget-&gt;On();</span><br><span class="line"></span><br><span class="line">  renderWindowInteractor-&gt;Start();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h2><p><a target="_blank" rel="noopener" href="https://vtk.org/Wiki/VTK/Tutorials/Widgets">VTK Widgets Tutorials</a><br><a target="_blank" rel="noopener" href="https://lorensen.github.io/VTKExamples/site/Cxx/#widgets">VTKExamples-Widgets</a><br><img src="https://img-blog.csdnimg.cn/20190419170707749.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21pbm1pbmRpYW56aQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20190422150423250.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21pbm1pbmRpYW56aQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/12/14/ITK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E8%AF%BB%E5%8F%96%E5%A4%9A%E5%B8%A7DICOM%E5%9B%BE%E5%83%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="AndyJMR">
      <meta itemprop="description" content="不积跬步，无以至千里；不积小流，无以成江海。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AndyJMR's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/12/14/ITK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E8%AF%BB%E5%8F%96%E5%A4%9A%E5%B8%A7DICOM%E5%9B%BE%E5%83%8F/" class="post-title-link" itemprop="url">ITK笔记——读取多帧DICOM图像</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2020-12-14 13:28:25 / Modified: 14:46:49" itemprop="dateCreated datePublished" datetime="2020-12-14T13:28:25+08:00">2020-12-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ITK%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">ITK笔记</span></a>
        </span>
    </span>

  
    <span id="/2020/12/14/ITK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E8%AF%BB%E5%8F%96%E5%A4%9A%E5%B8%A7DICOM%E5%9B%BE%E5%83%8F/" class="post-meta-item leancloud_visitors" data-flag-title="ITK笔记——读取多帧DICOM图像" title="Views">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/12/14/ITK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E8%AF%BB%E5%8F%96%E5%A4%9A%E5%B8%A7DICOM%E5%9B%BE%E5%83%8F/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/12/14/ITK笔记——读取多帧DICOM图像/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>上篇笔记介绍了单个DICOM图像的读取(<a target="_blank" rel="noopener" href="https://blog.csdn.net/minmindianzi/article/details/100851171">ITK笔记——读取单个DICOM切片</a>)，接下来看如何读取DICOM序列以及使用。</p>
<h2 id="读取多个DICOM图像"><a href="#读取多个DICOM图像" class="headerlink" title="读取多个DICOM图像"></a>读取多个DICOM图像</h2><p><strong>定义数据类型</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> PixelType = <span class="keyword">signed</span> <span class="keyword">short</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> Dimension = <span class="number">3</span>; <span class="comment">// The dimension is 3, not 2</span></span><br><span class="line"><span class="keyword">using</span> ImageType = itk::Image&lt;PixelType, Dimension&gt;;</span><br></pre></td></tr></table></figure>
<p><strong>初始化GDCM接口</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> ImageIOType = itk::GDCMImageIO;</span><br><span class="line">ImageIOType::Pointer dicomIO = ImageIOType::New();</span><br></pre></td></tr></table></figure>
<p><strong>设置ImageFileReader</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> NamesGeneratorType = itk::GDCMSeriesFileNames;</span><br><span class="line">NamesGeneratorType::Pointer nameGenarator = NamesGeneratorType::New();</span><br><span class="line">nameGenarator-&gt;SetDirectory(argv[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> FilenamesContainer = <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt;;</span><br><span class="line">FilenamesContainer filenames = nameGenarator-&gt;GetInputFileNames();</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> ReaderType = itk::ImageSeriesReader&lt;ImageType&gt;;</span><br><span class="line">ReaderType::Pointer reader = ReaderType::New();</span><br><span class="line">reader-&gt;SetImageIO(dicomIO);</span><br><span class="line">reader-&gt;SetFileNames(filenames);</span><br></pre></td></tr></table></figure>
<p><strong>执行读取</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reader-&gt;Update();</span><br></pre></td></tr></table></figure>

<h2 id="使用DICOM数据"><a href="#使用DICOM数据" class="headerlink" title="使用DICOM数据"></a>使用DICOM数据</h2><p><strong>获取医学信息</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> name[<span class="number">512</span>];</span><br><span class="line">dicomIO-&gt;GetPatientName(name);</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;patient: &quot;</span> &lt;&lt; name &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> Dictionary = itk::MetaDataDictionary;</span><br><span class="line"><span class="keyword">using</span> MetaDataStringType = itk::MetaDataObject&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt;;</span><br><span class="line"><span class="keyword">const</span> Dictionary&amp; dic = dicomIO-&gt;GetMetaDataDictionary();</span><br><span class="line"><span class="keyword">auto</span> itr = dic.Begin();</span><br><span class="line"><span class="keyword">auto</span> end = dic.End();</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">string</span> entryId = <span class="string">&quot;0010|0010&quot;</span>;</span><br><span class="line"><span class="keyword">auto</span> tagItr = dic.Find(entryId);</span><br><span class="line"><span class="keyword">if</span> (tagItr != end)</span><br><span class="line">&#123;</span><br><span class="line">	MetaDataStringType::ConstPointer entryvalue =</span><br><span class="line">		<span class="keyword">dynamic_cast</span>&lt;<span class="keyword">const</span> MetaDataStringType*&gt; (tagItr-&gt;second.GetPointer());</span><br><span class="line">	<span class="keyword">if</span> (entryvalue)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">string</span> tagvalue = entryvalue-&gt;GetMetaDataObjectValue();</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;patient: &quot;</span> &lt;&lt; tagvalue &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>转成VTK格式数据</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> ImageConnector = itk::ImageToVTKImageFilter&lt;ImageType&gt;;</span><br><span class="line">ImageConnector::Pointer imageConnector = ImageConnector::New();</span><br><span class="line">imageConnector-&gt;SetInput(reader-&gt;GetOutput());</span><br><span class="line">imageConnector-&gt;Update();</span><br></pre></td></tr></table></figure>

<h2 id="ReadDICMOSeries-cxx"><a href="#ReadDICMOSeries-cxx" class="headerlink" title="ReadDICMOSeries.cxx"></a>ReadDICMOSeries.cxx</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;itkImage.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;itkGDCMImageIO.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;itkGDCMSeriesFileNames.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;itkImageSeriesReader.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;itkImageToVTKImageFilter.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (argc &lt; <span class="number">2</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cerr</span> &lt;&lt; <span class="string">&quot;Usage: &quot;</span> &lt;&lt; argv[<span class="number">0</span>] &lt;&lt; <span class="string">&quot; DicomDirectory&quot;</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">using</span> PixelType = <span class="keyword">signed</span> <span class="keyword">short</span>;</span><br><span class="line">	<span class="keyword">constexpr</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> Dimension = <span class="number">3</span>; <span class="comment">// The dimension is 3, not 2</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">using</span> ImageType = itk::Image&lt;PixelType, Dimension&gt;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">using</span> ImageIOType = itk::GDCMImageIO;</span><br><span class="line">	ImageIOType::Pointer dicomIO = ImageIOType::New();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">using</span> NamesGeneratorType = itk::GDCMSeriesFileNames;</span><br><span class="line">	NamesGeneratorType::Pointer nameGenarator = NamesGeneratorType::New();</span><br><span class="line">	nameGenarator-&gt;SetDirectory(argv[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">using</span> FilenamesContainer = <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt;;</span><br><span class="line">	FilenamesContainer filenames = nameGenarator-&gt;GetInputFileNames();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">using</span> ReaderType = itk::ImageSeriesReader&lt;ImageType&gt;;</span><br><span class="line">	ReaderType::Pointer reader = ReaderType::New();</span><br><span class="line">	reader-&gt;SetImageIO(dicomIO);</span><br><span class="line">	reader-&gt;SetFileNames(filenames);</span><br><span class="line">	<span class="keyword">try</span></span><br><span class="line">	&#123;</span><br><span class="line">		reader-&gt;Update();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">catch</span> (itk::ExceptionObject&amp; ex)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; ex &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">512</span>];</span><br><span class="line">	dicomIO-&gt;GetPatientName(name);</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;patient: &quot;</span> &lt;&lt; name &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">using</span> Dictionary = itk::MetaDataDictionary;</span><br><span class="line">	<span class="keyword">using</span> MetaDataStringType = itk::MetaDataObject&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt;;</span><br><span class="line">	<span class="keyword">const</span> Dictionary&amp; dic = dicomIO-&gt;GetMetaDataDictionary();</span><br><span class="line">	<span class="keyword">auto</span> itr = dic.Begin();</span><br><span class="line">	<span class="keyword">auto</span> end = dic.End();</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> entryId = <span class="string">&quot;0010|0010&quot;</span>;</span><br><span class="line">	<span class="keyword">auto</span> tagItr = dic.Find(entryId);</span><br><span class="line">	<span class="keyword">if</span> (tagItr != end)</span><br><span class="line">	&#123;</span><br><span class="line">		MetaDataStringType::ConstPointer entryvalue =</span><br><span class="line">			<span class="keyword">dynamic_cast</span>&lt;<span class="keyword">const</span> MetaDataStringType*&gt; (tagItr-&gt;second.GetPointer());</span><br><span class="line">		<span class="keyword">if</span> (entryvalue)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">string</span> tagvalue = entryvalue-&gt;GetMetaDataObjectValue();</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;patient: &quot;</span> &lt;&lt; tagvalue &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">using</span> ImageConnector = itk::ImageToVTKImageFilter&lt;ImageType&gt;;</span><br><span class="line">	ImageConnector::Pointer imageConnector = ImageConnector::New();</span><br><span class="line">	imageConnector-&gt;SetInput(reader-&gt;GetOutput());</span><br><span class="line">	imageConnector-&gt;Update();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h2><p><a target="_blank" rel="noopener" href="https://github.com/AndyJMR/ReadDICOMSeries"><strong>Example Download</strong></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required(VERSION 2.8)</span><br><span class="line"></span><br><span class="line">project(ReadDICOMSeries)</span><br><span class="line"></span><br><span class="line">find_package(ITK REQUIRED)</span><br><span class="line">include($&#123;ITK_USE_FILE&#125;)</span><br><span class="line"></span><br><span class="line">add_executable(ReadDICMOSeries ReadDICMOSeries.cxx)</span><br><span class="line">target_link_libraries(ReadDICMOSeries $&#123;ITK_LIBRARIES&#125;)</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://dicom.innolitics.com/ciods">DICOM tag</a><br><img src="https://img-blog.csdnimg.cn/20191026105325161.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21pbm1pbmRpYW56aQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a target="_blank" rel="noopener" href="https://itk.org/Doxygen/html/Examples_2IO_2DicomSeriesReadImageWrite2_8cxx-example.html">Examples/IO/DicomSeriesReadImageWrite2.cxx</a><br><img src="https://img-blog.csdnimg.cn/2019102610395745.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21pbm1pbmRpYW56aQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/12/14/ITK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E8%AF%BB%E5%8F%96%E5%8D%95%E4%B8%AADICOM%E5%88%87%E7%89%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="AndyJMR">
      <meta itemprop="description" content="不积跬步，无以至千里；不积小流，无以成江海。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AndyJMR's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/12/14/ITK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E8%AF%BB%E5%8F%96%E5%8D%95%E4%B8%AADICOM%E5%88%87%E7%89%87/" class="post-title-link" itemprop="url">ITK笔记——读取单个DICOM切片</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2020-12-14 13:28:25 / Modified: 14:46:32" itemprop="dateCreated datePublished" datetime="2020-12-14T13:28:25+08:00">2020-12-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ITK%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">ITK笔记</span></a>
        </span>
    </span>

  
    <span id="/2020/12/14/ITK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E8%AF%BB%E5%8F%96%E5%8D%95%E4%B8%AADICOM%E5%88%87%E7%89%87/" class="post-meta-item leancloud_visitors" data-flag-title="ITK笔记——读取单个DICOM切片" title="Views">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/12/14/ITK%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E8%AF%BB%E5%8F%96%E5%8D%95%E4%B8%AADICOM%E5%88%87%E7%89%87/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/12/14/ITK笔记——读取单个DICOM切片/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="什么是DICOM"><a href="#什么是DICOM" class="headerlink" title="什么是DICOM"></a>什么是DICOM</h2><p>DICOM(Digital imaging and Communication in Medicine)，医学数字成像与通信，它是一个国际标准(ISO 12052)，由美国放射学院(ACR)和国家电气制造协会(NEMA)在1970年代共同制定，旨在统一格式，解决医学图像的处理、存储、打印以及传输。</p>
<h2 id="GDCM"><a href="#GDCM" class="headerlink" title="GDCM"></a>GDCM</h2><p>GDCM(Grassroots DICOM)，开源库，DICOM标准的一种实现。ITK的DICOM设施，就是由它提供的。对应<strong>itk::GDCMImageIO</strong>类名。</p>
<h2 id="读取单个DICOM数据"><a href="#读取单个DICOM数据" class="headerlink" title="读取单个DICOM数据"></a>读取单个DICOM数据</h2><p><strong>定义数据类型</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> InputPixelType = <span class="keyword">signed</span> <span class="keyword">short</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> InputDimension = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> InputImageType = itk::Image&lt; InputPixelType, InputDimension &gt;;</span><br></pre></td></tr></table></figure>
<p><strong>初始化GDCM接口</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> ImageIOType = itk::GDCMImageIO;</span><br><span class="line">ImageIOType::Pointer gdcmImageIO = ImageIOType::New();</span><br></pre></td></tr></table></figure>
<p><strong>设置ImageFileReader</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> ReaderType = itk::ImageFileReader&lt; InputImageType &gt;;</span><br><span class="line">ReaderType::Pointer reader = ReaderType::New();</span><br><span class="line">reader-&gt;SetFileName(argv[<span class="number">1</span>]);</span><br><span class="line">reader-&gt;SetImageIO(gdcmImageIO);</span><br></pre></td></tr></table></figure>

<p><strong>触发读取</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reader-&gt;Update();</span><br></pre></td></tr></table></figure>
<h2 id="VTK渲染"><a href="#VTK渲染" class="headerlink" title="VTK渲染"></a>VTK渲染</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QuickView viewer;</span><br><span class="line">viewer.AddImage(reader-&gt;GetOutput());</span><br><span class="line">viewer.Visualize();</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190915174435856.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21pbm1pbmRpYW56aQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="ReadDICOMImage-cxx"><a href="#ReadDICOMImage-cxx" class="headerlink" title="ReadDICOMImage.cxx"></a>ReadDICOMImage.cxx</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;itkImageFileReader.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;itkGDCMImageIO.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;QuickView.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (argc &lt; <span class="number">2</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cerr</span> &lt;&lt; <span class="string">&quot;Usage: &quot;</span> &lt;&lt; argv[<span class="number">0</span>] &lt;&lt; <span class="string">&quot; DicomImage&quot;</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">using</span> InputPixelType = <span class="keyword">signed</span> <span class="keyword">short</span>;</span><br><span class="line">	<span class="keyword">constexpr</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> InputDimension = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">using</span> InputImageType = itk::Image&lt; InputPixelType, InputDimension &gt;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">using</span> ImageIOType = itk::GDCMImageIO;</span><br><span class="line">	ImageIOType::Pointer gdcmImageIO = ImageIOType::New();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">using</span> ReaderType = itk::ImageFileReader&lt; InputImageType &gt;;</span><br><span class="line">	ReaderType::Pointer reader = ReaderType::New();</span><br><span class="line">	reader-&gt;SetFileName(argv[<span class="number">1</span>]);</span><br><span class="line">	reader-&gt;SetImageIO(gdcmImageIO);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">try</span></span><br><span class="line">	&#123;</span><br><span class="line">		reader-&gt;Update();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">catch</span> ( itk::ExceptionObject &amp;ex)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cerr</span> &lt;&lt; <span class="string">&quot;exception in file reader &quot;</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cerr</span> &lt;&lt; ex &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	QuickView viewer;</span><br><span class="line">	viewer.AddImage(reader-&gt;GetOutput());</span><br><span class="line">	viewer.Visualize();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required(VERSION 2.8)</span><br><span class="line"> </span><br><span class="line">project(ReadDICOMImage)</span><br><span class="line"> </span><br><span class="line">find_package(ITK REQUIRED)</span><br><span class="line">include($&#123;ITK_USE_FILE&#125;)</span><br><span class="line">if (ITKVtkGlue_LOADED)</span><br><span class="line">  find_package(VTK REQUIRED)</span><br><span class="line">  include($&#123;VTK_USE_FILE&#125;)</span><br><span class="line">else()</span><br><span class="line">  find_package(ItkVtkGlue REQUIRED)</span><br><span class="line">  include($&#123;ItkVtkGlue_USE_FILE&#125;)</span><br><span class="line">  set(Glue ItkVtkGlue)</span><br><span class="line">endif()</span><br><span class="line"> </span><br><span class="line">add_executable(ReadDICOMImage MACOSX_BUNDLE ReadDICOMImage.cxx)</span><br><span class="line">target_link_libraries(ReadDICOMImage</span><br><span class="line">  $&#123;Glue&#125;  $&#123;VTK_LIBRARIES&#125; $&#123;ITK_LIBRARIES&#125;)</span><br></pre></td></tr></table></figure>
<p><strong><a target="_blank" rel="noopener" href="https://github.com/AndyJMR/ReadDICOMImage">Example Download</a></strong></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a target="_blank" rel="noopener" href="https://itk.org/Doxygen/html/Examples_2IO_2DicomImageReadWrite_8cxx-example.html">Examples/IO/DicomImageReadWrite.cxx</a></p>
<p><img src="https://img-blog.csdnimg.cn/20190915175313436.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21pbm1pbmRpYW56aQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/12/14/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="AndyJMR">
      <meta itemprop="description" content="不积跬步，无以至千里；不积小流，无以成江海。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AndyJMR's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/12/14/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-12-14 11:29:51" itemprop="dateCreated datePublished" datetime="2020-12-14T11:29:51+08:00">2020-12-14</time>
    </span>

  
    <span id="/2020/12/14/hello-world/" class="post-meta-item leancloud_visitors" data-flag-title="Hello World" title="Views">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/12/14/hello-world/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/12/14/hello-world/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>


<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">AndyJMR</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  







  



<script>
  (function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      const visitors = document.querySelector('.leancloud_visitors');
      const url = decodeURI(visitors.id);
      const title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            const counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              leancloudSelector(url).innerText = 'Counter not initialized! More info at console err msg.';
              console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.');
            
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      const visitors = document.querySelectorAll('.leancloud_visitors');
      const entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            const target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    const { app_id, app_key, server_url } = {"enable":true,"app_id":"a2YE7UNG6CpOcQJ3T3PhTOKT-gzGzoHsz","app_key":"3ARwkw15puLjE9cLL4d6FLhI","server_url":null,"security":true,"visitor":false};
    function fetchData(api_server) {
      const Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    const api_server = app_id.slice(-9) === '-MdYXbMMI' ? `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com` : server_url;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();
</script>



<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://AndyJMR.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
